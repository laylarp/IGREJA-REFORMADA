<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gala Juvenil - Convite Eletr√¥nico</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600&family=Dancing+Script:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    
    <div class="christian-decoration cross-top-left">‚úù</div>
    <div class="christian-decoration cross-top-right">‚úù</div>
    <div class="christian-decoration cross-bottom-left">‚úù</div>
    <div class="christian-decoration cross-bottom-right">‚úù</div>
    <div class="christian-decoration dove-decoration">üïä</div>

    <div class="container">
        
        <div class="welcome-screen" id="welcomeScreen">
            <div class="church-header">
                <div class="church-logo" id="churchLogo">
                    <div class="logo-placeholder">IGREJA<br>REFORMADA</div>
                </div>
                
                <h1 class="church-name">Igreja Reformada de Mo√ßambique</h1>
                <p class="church-subtitle">Gala Juvenil 2025</p>
                <p class="event-year">26 DE DEZEMBRO</p>
            </div>
            
            <div class="welcome-message">
                <p>Seja bem-vindo(a) ao sistema de convites eletr√¥nicos para a <strong>Gala Juvenil 2025</strong>.</p>
                <p>Crie seu convite personalizado e fa√ßa parte deste momento especial de comunh√£o, louvor e confraterniza√ß√£o.</p>
            </div>
            
            <div class="welcome-buttons">
                <button class="btn btn-primary" id="createInviteBtn">
                    <i class="fas fa-ticket-alt"></i> Criar  Convite
                </button>
                <button class="btn btn-secondary" id="viewInviteBtn" style="display: none;">
                    <i class="fas fa-eye"></i> Ver  Convite
                </button>
            </div>
        </div>

        
        <div class="creation-screen" id="creationScreen">
            <div class="creation-card">
                <div class="creation-header">
                    <h2><i class="fas fa-gift"></i> Personalize Seu Convite</h2>
                    <p>Insira seu nome completo para gerar um convite personalizado para a Gala Juvenil 2025</p>
                </div>
                
                <div class="input-group">
                    <label for="guestName">Nome Completo do Convidado:</label>
                    <input type="text" id="guestName" placeholder="Ex: Jo√£o Carlos da Silva" maxlength="60">
                    <div class="input-hint">
                        <i class="fas fa-info-circle"></i> O nome ser√° formatado automaticamente (primeira letra mai√∫scula)
                    </div>
                </div>
                
                <div class="form-buttons">
                    <button class="btn btn-primary" id="generateInviteBtn">
                        <i class="fas fa-check-circle"></i> Gerar Convite Personalizado
                    </button>
                    <button class="btn btn-back" id="backToHomeBtn">
                        <i class="fas fa-arrow-left"></i> Voltar para o In√≠cio
                    </button>
                </div>
                
                <div class="error-message" id="nameError">
                    <i class="fas fa-exclamation-circle"></i> Por favor, insira um nome v√°lido.
                </div>
            </div>
        </div>

        
        <div class="invitation-container" id="invitationContainer">
            <div class="invitation-card" id="invitationCard">
                
                <div class="invitation-header">
                    <div class="invitation-logo" id="invitationLogo">
                        
                    </div>
                    <h1 class="invitation-title">GALA JUVENIL</h1>
                    <h2 class="invitation-subtitle">Convite Especial</h2>
                    <div class="invitation-year">2025</div>
                </div>

                <div class="invitation-body">
                    <div class="invitation-text">
                        <p>A COMISS√ÉO ORGANIZADORA DA GALA JUVENIL TEM A HONRA DE CONVIDAR</p>
                    </div>

                    <div class="guest-name-card">
                        <span class="guest-name-label">PARA PARTICIPAR DA GALA JUVENIL 2025</span>
                        <div class="guest-name" id="displayName">[NOME DO CONVIDADO]</div>
                    </div>

                    <div class="invitation-text">
                        <p>QUE SE REALIZAR√Å EM UM AMBIENTE ESPECIAL DE COMUNH√ÉO, LOUVOR E CONFRATERNIZA√á√ÉO FRATERNA.</p>
                        <p>SER√Å UMA OCASI√ÉO MARCANTE DE COMUNH√ÉO ESPIRITUAL, ENRIQUECIDA POR MOMENTOS DE ORA√á√ÉO, C√ÇNTICOS E CELEBRA√á√ÉO CONJUNTA.</p>
                    </div>

            
                    <div class="event-details-container">
                        <div class="detail-card">
                            <div class="detail-card-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h3>Data do Evento</h3>
                            <div class="detail-card-content">
                                <p><strong>26 de Dezembro de 2025</strong></p>
                                <p>Sexta-feira</p>
    
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-card-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h3>Hor√°rio</h3>
                            <div class="detail-card-content">
                                <p><strong>22:00 √†s 04:00</strong></p>
                                <p>Noite de adora√ß√£o e ora√ß√£o</p>
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-card-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <h3>Localiza√ß√£o</h3>
                            <div class="detail-card-content">
                                <p><strong>Congrega√ß√£o Tsakane</strong></p>
                                <p>Machava-Sede</p>
                                <p>Rua da Mulher</p>
                            </div>
                        </div>
                    </div>

                    <div class="invitation-text">
                        <p>CIENTES DE QUE PODEREMOS CONTAR COM A VOSSA HONROSA PRESEN√áA, APRESENTAMOS OS NOSSOS MAIS ELEVADOS PROTESTOS DE ESTIMA E CONSIDERA√á√ÉO.</p>
                    </div>
                </div>

                
                <div class="invitation-footer">
                    
                    <div class="contact-info">
                        <h4>Para mais informa√ß√µes:</h4>
                        <div class="contact-phone">
                            <i class="fas fa-phone-alt"></i> 84 401 2254
                        </div>
                        <p class="contact-note">Dispon√≠vel para esclarecimentos e confirma√ß√µes</p>
                    </div>

                    <div class="church-signature">
                        <div class="church-name-footer">Igreja Reformada</div>
                        <div class="event-name-footer">Gala Juvenil 2025</div>
                        <div class="signature-line"></div>
                        <p class="signature-text">Comiss√£o Organizadora da Gala Juvenil</p>
                
                    </div>
                </div>
            </div>

        
            <div class="action-buttons" id="actionButtons">
                <button class="btn btn-primary" id="downloadInviteBtn">
                    <i class="fas fa-download"></i> Baixar Convite 
                </button>
                <button class="btn btn-secondary" id="sendWhatsAppBtn">
                    <i class="fab fa-whatsapp"></i> Enviar 
                </button>
                <button class="btn btn-primary" id="sendSMSBtn">
                    <i class="fas fa-sms"></i>   SMS
                </button>
                <button class="btn btn-back" id="editInviteBtn">
                    <i class="fas fa-edit"></i> Editar Nome
                </button>
                <button class="btn btn-back" id="backToHomeFromInviteBtn">
                    <i class="fas fa-arrow-left"></i> Voltar  
                </button>
            </div>
        </div>

        
        <div class="download-only-screen" id="downloadOnlyScreen">
            <div class="invitation-card" id="downloadInvitationCard">
                
                <div class="invitation-header">
                    <div class="invitation-logo">
                        
                    </div>
                    <h1 class="invitation-title">GALA JUVENIL</h1>
                    <h2 class="invitation-subtitle">Convite Especial</h2>
                    <div class="invitation-year">2025</div>
                </div>

                <div class="invitation-body">
                    <div class="invitation-text">
                        <p>A COMISS√ÉO ORGANIZADORA DA GALA JUVENIL TEM A HONRA DE CONVIDAR</p>
                    </div>

                    <div class="guest-name-card">
                        <span class="guest-name-label">PARA PARTICIPAR DA GALA JUVENIL 2025</span>
                        <div class="guest-name" id="downloadDisplayName">[NOME DO CONVIDADO]</div>
                    </div>

                    <div class="invitation-text">
                        <p>QUE SE REALIZAR√Å EM UM AMBIENTE ESPECIAL DE COMUNH√ÉO, LOUVOR E CONFRATERNIZA√á√ÉO FRATERNA.</p>
                        <p>SER√Å UMA OCASI√ÉO MARCANTE DE COMUNH√ÉO ESPIRITUAL, ENRIQUECIDA POR MOMENTOS DE ORA√á√ÉO, C√ÇNTICOS E CELEBRA√á√ÉO CONJUNTA.</p>
                    </div>

            
                    <div class="event-details-container">
                        <div class="detail-card">
                            <div class="detail-card-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h3>Data do Evento</h3>
                            <div class="detail-card-content">
                                <p><strong>26 de Dezembro de 2025</strong></p>
                                <p>Sexta-feira</p>
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-card-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h3>Hor√°rio</h3>
                            <div class="detail-card-content">
                                <p><strong>22:00 √†s 04:00</strong></p>
                                <p>Noite de adora√ß√£o e ora√ß√£o</p>
                            </div>
                        </div>

                        <div class="detail-card">
                            <div class="detail-card-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <h3>Localiza√ß√£o</h3>
                            <div class="detail-card-content">
                                <p><strong>Congrega√ß√£o Tsakane</strong></p>
                                <p>Machava-Sede</p>
                                <p>Rua da Mulher</p>
                            </div>
                        </div>
                    </div>

                    <div class="invitation-text">
                        <p>CIENTES DE QUE PODEREMOS CONTAR COM A VOSSA HONROSA PRESEN√áA, APRESENTAMOS OS NOSSOS MAIS ELEVADOS PROTESTOS DE ESTIMA E CONSIDERA√á√ÉO.</p>
                    </div>
                </div>

                
                <div class="invitation-footer">
                    
                    <div class="contact-info">
                        <h4>Para mais informa√ß√µes:</h4>
                        <div class="contact-phone">
                            <i class="fas fa-phone-alt"></i> 84 401 2254
                        </div>
                        <p class="contact-note">Dispon√≠vel para esclarecimentos e confirma√ß√µes</p>
                    </div>

                    <div class="church-signature">
                        <div class="church-name-footer">Igreja Reformada</div>
                        <div class="event-name-footer">Gala Juvenil 2025</div>
                        <div class="signature-line"></div>
                        <p class="signature-text">Comiss√£o Organizadora da Gala Juvenil</p>
                    </div>
                </div>
            </div>

            <div class="download-only-button">
                <button class="btn btn-primary" id="downloadOnlyBtn">
                    <i class="fas fa-download"></i> Baixar Convite
                </button>
            </div>
        </div>
    </div>

    
    <div class="modal-overlay" id="passwordModal">
        <div class="modal">
            <button class="modal-close" id="closePasswordModal">&times;</button>
            <h2><i class="fas fa-lock"></i> Acesso ao Criador de Convites</h2>
            
            <div id="passwordSection">
                <div class="input-group">
                    <label for="accessPassword">Digite a senha de acesso:</label>
                    <input type="password" id="accessPassword" placeholder="Digite a senha">
                </div>
                <div class="form-buttons">
                    <button class="btn btn-primary" id="verifyPasswordBtn">Acessar</button>
                </div>
                <div class="error-message" id="passwordError">
                    <i class="fas fa-exclamation-triangle"></i> Senha incorreta. Tente novamente.
                </div>
            </div>
        </div>
    </div>

     <footer class="site-footer">
        <div class="footer-content">
            <p>Criado por <strong>Raymond-Technology</strong>. Todos os direitos reservados ¬© 2025</p>
           
        </div>
    </footer>
    
    <canvas id="invitationCanvas" style="display: none;"></canvas>
    
    <script src="lixo.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
var dadosInuteis1 = "asdhjf872364kjhasdf983745kjhasdf" + Math.random() * 10000;
var arrayConfuso = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];

function funcaoSemSentidoA(parametro) {
    var resultadoTemporario = "";
    for (var indice = 0; indice < parametro.length; indice++) {
        resultadoTemporario += parametro.charCodeAt(indice) * Math.PI + "-";
    }
    return resultadoTemporario.substring(0, resultadoTemporario.length - 1);
}

var objetoInutil = {
    propriedade1: "valor1",
    propriedade2: 98765.4321,
    propriedade3: [11, 22, 33, 44, 55],
    propriedade4: { 
        subprop1: "texto aleat√≥rio",
        subprop2: function() { return Math.random(); }
    },
    propriedade5: new Date().getTime()
};

var xyz123 = "lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod";
var abc789 = 87654 * 4321 / 1234 + 5678;
var def456 = ["x", "y", "z", "a", "b", "c", "d", "e"];

var textoHebraicoMisturado = "◊ñ◊î ◊ß◊ï◊ì ◊û◊ß◊®◊ô ◊ú◊ó◊ú◊ï◊ò◊ô◊ü ◊ú◊ú◊ê ◊û◊©◊û◊¢◊ï◊™";
var codigoOculto1 = "password:hidden_in_plain_sight";
var codigoOculto2 = "senha:perdida_nos_codigos";
var codigoOculto3 = "chave:esquecida_para_sempre";

var adminPassword = "irm3022irm";

function outraFuncaoInutil(valor) {
    var acumulador = 0;
    for (var i = 0; i < valor; i++) {
        acumulador += Math.pow(i, 2);
    }
    return acumulador;
}

var dadosExtras1 = "fim da primeira parte " + new Date().toISOString();
var dadosExtras2 = 999888777666555444333222111;
var dadosExtras3 = ["final", "arquivo", "terminado", "concluido"];

function funcaoNuncaUsada() {
    console.log("Esta fun√ß√£o nunca ser√° executada");
    return "resultado in√∫til";
}

var terminoDovar dadosInuteis1 = "asdhjf872364kjhasdf983745kjhasdf" + Math.random() * 10000;
var arrayConfuso = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];

function funcaoSemSentidoA(parametro) {
    var resultadoTemporario = "";
    for (var indice = 0; indice < parametro.length; indice++) {
        resultadoTemporario += parametro.charCodeAt(indice) * Math.PI + "-";
    }
    return resultadoTemporario.substring(0, resultadoTemporario.length - 1);
}

var objetoInutil = {
    propriedade1: "valor1",
    propriedade2: 98765.4321,
    propriedade3: [11, 22, 33, 44, 55],
    propriedade4: { 
        subprop1: "texto aleat√≥rio",
        subprop2: function() { return Math.random(); }
    },
    propriedade5: new Date().getTime()
};

var xyz123 = "lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod";
var abc789 = 87654 * 4321 / 1234 + 5678;
var def456 = ["x", "y", "z", "a", "b", "c", "d", "e"];

var textoHebraicoMisturado = "◊ñ◊î ◊ß◊ï◊ì ◊û◊ß◊®◊ô ◊ú◊ó◊ú◊ï◊ò◊ô◊ü ◊ú◊ú◊ê ◊û◊©◊û◊¢◊ï◊™";
var codigoOculto1 = "password:hidden_in_plain_sight";
var codigoOculto2 = "senha:perdida_nos_codigos";
var codigoOculto3 = "chave:esquecida_para_sempre";

var adminPassword = "irm3022irm";

function outraFuncaoInutil(valor) {
    var acumulador = 0;
    for (var i = 0; i < valor; i++) {
        acumulador += Math.pow(i, 2);
    }
    return acumulador;
}

var dadosExtras1 = "fim da primeira parte " + new Date().toISOString();
var dadosExtras2 = 999888777666555444333222111;
var dadosExtras3 = ["final", "arquivo", "terminado", "concluido"];

function funcaoNuncaUsada() {
    console.log("Esta fun√ß√£o nunca ser√° executada");
    return "resultado in√∫til";
}

var terminoDoArquivo = funcaoSemSentidoA("fim") + " " + outraFuncaoInutil(5);
Arquivo = funcaoSemSentidoA("fim") + " " + outraFuncaoInutil(5);
{
  "name": "Gala Juvenil",
  "short_name": "Gala",
  "description": "Sistema de convites para Gala Juvenil 2025",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#f9f3e9",
  "theme_color": "#8B4513",
  "orientation": "portrait",
  "icons": [
    {
      "src": "/logo.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/logo.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
const welcomeScreen = document.getElementById('welcomeScreen');
const creationScreen = document.getElementById('creationScreen');
const invitationContainer = document.getElementById('invitationContainer');
const downloadOnlyScreen = document.getElementById('downloadOnlyScreen');
const actionButtons = document.getElementById('actionButtons');
const viewInviteBtn = document.getElementById('viewInviteBtn');
const createInviteBtn = document.getElementById('createInviteBtn');
const backToHomeBtn = document.getElementById('backToHomeBtn');
const generateInviteBtn = document.getElementById('generateInviteBtn');
const guestNameInput = document.getElementById('guestName');
const displayName = document.getElementById('displayName');
const downloadDisplayName = document.getElementById('downloadDisplayName');
const downloadInviteBtn = document.getElementById('downloadInviteBtn');
const downloadOnlyBtn = document.getElementById('downloadOnlyBtn');
const sendWhatsAppBtn = document.getElementById('sendWhatsAppBtn');
const sendSMSBtn = document.getElementById('sendSMSBtn');
const editInviteBtn = document.getElementById('editInviteBtn');
const backToHomeFromInviteBtn = document.getElementById('backToHomeFromInviteBtn');
const passwordModal = document.getElementById('passwordModal');
const closePasswordModal = document.getElementById('closePasswordModal');
const accessPasswordInput = document.getElementById('accessPassword');
const verifyPasswordBtn = document.getElementById('verifyPasswordBtn');
const passwordError = document.getElementById('passwordError');

let currentGuestName = "";

function formatName(name) {
    return name.toLowerCase()
        .split(' ')
        .map(word => {
            const connectors = ['da', 'de', 'do', 'dos', 'das', 'e'];
            if (connectors.includes(word)) {
                return word;
            }
            return word.charAt(0).toUpperCase() + word.slice(1);
        })
        .join(' ');
}

function loadChurchLogo() {
    const logoUrl = 'logo.png';
    const churchLogo = document.getElementById('churchLogo');
    const invitationLogos = document.querySelectorAll('.invitation-logo');
    
    const img = new Image();
    img.onload = function() {
        churchLogo.innerHTML = '';
        const logoImg1 = document.createElement('img');
        logoImg1.src = logoUrl;
        logoImg1.alt = 'Logo Igreja Reformada';
        churchLogo.appendChild(logoImg1);
        
        invitationLogos.forEach(invitationLogo => {
            invitationLogo.innerHTML = '';
            const logoImg2 = document.createElement('img');
            logoImg2.src = logoUrl;
            logoImg2.alt = 'Logo Igreja Reformada';
            invitationLogo.appendChild(logoImg2);
        });
    };
    
    img.onerror = function() {
        console.log('Logo n√£o encontrada. Usando placeholder.');
    };
    
    img.src = logoUrl;
}

createInviteBtn.addEventListener('click', function() {
    passwordModal.style.display = 'flex';
    accessPasswordInput.value = '';
    passwordError.style.display = 'none';
});

closePasswordModal.addEventListener('click', function() {
    passwordModal.style.display = 'none';
});

verifyPasswordBtn.addEventListener('click', function() {
    const password = accessPasswordInput.value.trim();
    
    if (typeof adminPassword !== 'undefined' && password === adminPassword) {
        passwordModal.style.display = 'none';
        welcomeScreen.style.display = 'none';
        creationScreen.style.display = 'block';
        guestNameInput.value = currentGuestName || '';
        guestNameInput.focus();
    } else {
        passwordError.style.display = 'block';
        accessPasswordInput.focus();
    }
});

backToHomeBtn.addEventListener('click', function() {
    creationScreen.style.display = 'none';
    welcomeScreen.style.display = 'block';
    invitationContainer.style.display = 'none';
    downloadOnlyScreen.style.display = 'none';
    actionButtons.style.display = 'none';
});

viewInviteBtn.addEventListener('click', function() {
    welcomeScreen.style.display = 'none';
    creationScreen.style.display = 'none';
    downloadOnlyScreen.style.display = 'none';
    invitationContainer.style.display = 'block';
    actionButtons.style.display = 'grid';
    window.scrollTo({ top: 0, behavior: 'smooth' });
});

generateInviteBtn.addEventListener('click', function() {
    const name = guestNameInput.value.trim();
    
    if (!name || name.length < 3) {
        document.getElementById('nameError').style.display = 'block';
        guestNameInput.focus();
        return;
    }
    
    document.getElementById('nameError').style.display = 'none';
    currentGuestName = formatName(name);
    displayName.textContent = currentGuestName;
    
    localStorage.setItem('galaInviteName', currentGuestName);
    
    creationScreen.style.display = 'none';
    downloadOnlyScreen.style.display = 'none';
    invitationContainer.style.display = 'block';
    actionButtons.style.display = 'grid';
    viewInviteBtn.style.display = 'block';
    window.scrollTo({ top: 0, behavior: 'smooth' });
});

editInviteBtn.addEventListener('click', function() {
    invitationContainer.style.display = 'none';
    downloadOnlyScreen.style.display = 'none';
    actionButtons.style.display = 'none';
    creationScreen.style.display = 'block';
    guestNameInput.value = currentGuestName;
    guestNameInput.focus();
});

function downloadInvite(cardId, fileNamePrefix) {
    const invitationCard = document.getElementById(cardId);
    
    html2canvas(invitationCard, {
        scale: 2,
        useCORS: true,
        logging: false,
        backgroundColor: '#ffffff',
        allowTaint: true,
        removeContainer: true,
        width: invitationCard.offsetWidth,
        height: invitationCard.offsetHeight
    }).then(canvas => {
        const link = document.createElement('a');
        const fileName = `${fileNamePrefix}_${currentGuestName.replace(/\s+/g, '_')}.png`;
        link.download = fileName;
        link.href = canvas.toDataURL('image/png', 1.0);
        
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
    }).catch(error => {
        console.error('Erro ao baixar convite:', error);
        alert('Ocorreu um erro ao baixar o convite. Tente novamente.');
    });
}

downloadInviteBtn.addEventListener('click', function() {
    downloadInvite('invitationCard', 'Convite_Gala_Juvenil');
});

downloadOnlyBtn.addEventListener('click', function() {
    downloadInvite('downloadInvitationCard', 'Convite_Gala_Juvenil');
});

sendWhatsAppBtn.addEventListener('click', function() {
    const inviteUrl = `${window.location.href.split('?')[0]}?convite=${encodeURIComponent(currentGuestName)}`;
    const message = `Gl√≥ria a Deus! Paz e gra√ßa!\n\n${currentGuestName}, baixe o seu convite para a Gala Crist√£ Juvenil atrav√©s do link:\n\n${inviteUrl}`;
    
    const encodedMessage = encodeURIComponent(message);
    window.open(`https://wa.me/?text=${encodedMessage}`, '_blank');
});

sendSMSBtn.addEventListener('click', function() {
    const inviteUrl = `${window.location.href.split('?')[0]}?convite=${encodeURIComponent(currentGuestName)}`;
    const message = `Gl√≥ria a Deus! Paz e gra√ßa! ${currentGuestName}, baixe seu convite para a Gala Crist√£ Juvenil: ${inviteUrl}`;
    
    const encodedMessage = encodeURIComponent(message);
    window.open(`sms:?body=${encodedMessage}`, '_blank');
});

backToHomeFromInviteBtn.addEventListener('click', function() {
    invitationContainer.style.display = 'none';
    downloadOnlyScreen.style.display = 'none';
    actionButtons.style.display = 'none';
    welcomeScreen.style.display = 'block';
});

function checkUrlParams() {
    const urlParams = new URLSearchParams(window.location.search);
    const inviteName = urlParams.get('convite');
    
    if (inviteName) {
        const decodedName = decodeURIComponent(inviteName);
        currentGuestName = formatName(decodedName);
        downloadDisplayName.textContent = currentGuestName;
        
        welcomeScreen.style.display = 'none';
        creationScreen.style.display = 'none';
        invitationContainer.style.display = 'none';
        actionButtons.style.display = 'none';
        downloadOnlyScreen.style.display = 'block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
}

function checkSavedInvite() {
    const savedName = localStorage.getItem('galaInviteName');
    if (savedName) {
        currentGuestName = savedName;
        viewInviteBtn.style.display = 'block';
    }
}

guestNameInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        generateInviteBtn.click();
    }
});

accessPasswordInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        verifyPasswordBtn.click();
    }
});

passwordModal.addEventListener('click', function(e) {
    if (e.target === passwordModal) {
        passwordModal.style.display = 'none';
    }
});

document.addEventListener('DOMContentLoaded', function() {
    loadChurchLogo();
    checkSavedInvite();
    checkUrlParams();
    if (currentGuestName) {
        viewInviteBtn.style.display = 'block';
    }
});
const CACHE_NAME = 'gala-juvenil-v1';
const urlsToCache = [
  '/',
  '/index.html',
  '/styles.css',
  '/script.js',
  '/lixo.js',
  '/logo.png',
  'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css',
  'https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600&family=Dancing+Script:wght@400;600&display=swap',
  'https://html2canvas.hertzen.com/dist/html2canvas.min.js'
];

self.addEventListener('install', function(event) {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(function(cache) {
        return cache.addAll(urlsToCache);
      })
  );
});

self.addEventListener('fetch', function(event) {
  event.respondWith(
    caches.match(event.request)
      .then(function(response) {
        if (response) {
          return response;
        }
        return fetch(event.request);
      })
  );
});

self.addEventListener('activate', function(event) {
  event.waitUntil(
    caches.keys().then(function(cacheNames) {
      return Promise.all(
        cacheNames.map(function(cacheName) {
          if (cacheName !== CACHE_NAME) {
            return caches.delete(cacheName);
          }
        })
      );
    })
  );
});
{
  "headers": [
    {
      "source": "/service-worker.js",
      "headers": [
        {
          "key": "Service-Worker-Allowed",
          "value": "/"
        }
      ]
    }
  ],
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}